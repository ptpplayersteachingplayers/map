
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PTP Trainer Matcher ‚Äì Book Now</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #fff;
    }
    #map {
      height: 50vh;
      width: 100%;
    }
    .instructions {
      padding: 20px;
      background: #fffbe6;
      border-bottom: 2px solid #FFD700;
      text-align: center;
    }
    .instructions h2 {
      margin: 0;
      font-size: 1.4rem;
    }
    .results {
      max-width: 720px;
      margin: 0 auto;
      padding: 20px;
    }
    .card {
      background: #fff;
      border-left: 5px solid #FFD700;
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .card a {
      display: inline-block;
      background: #FFD700;
      color: #000;
      padding: 10px 16px;
      margin-top: 10px;
      font-weight: bold;
      text-decoration: none;
      border-radius: 8px;
    }
    .card .urgency {
      color: #c00;
      font-weight: 600;
      margin-top: 10px;
    }
    .sticky-cta {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #FFD700;
      color: #111;
      text-align: center;
      padding: 14px;
      font-weight: bold;
      font-size: 1rem;
      box-shadow: 0 -2px 6px rgba(0,0,0,0.1);
      z-index: 999;
    }
  </style>
</head>
<body>

<div class="instructions">
  <h2>‚úÖ Step 1: Enter ZIP ‚Ä¢ üìç Step 2: Pick a Field ‚Ä¢ üìÖ Step 3: Book a Trainer</h2>
</div>

<div id="map"></div>
<div class="results" id="results"></div>
<div class="sticky-cta">üìç Book Your Trainer Now ‚Äì Spots Filling Fast</div>

<script>
  const trainerFieldData = [{"trainer": "Cassidy Tannaddo", "fields": ["Mill Road Park", "Wilson Farm Park"]}, {"trainer": "Johnathan Evans", "fields": ["Heuser Park", "Reservoir Park"]}, {"trainer": "James Fitzgerald", "fields": ["Radnor Memorial", "Bo Connor Park"]}, {"trainer": "Lorenzo Avalos", "fields": ["Cherry Street Park", "Odoriso Park"]}, {"trainer": "Sebastian Perez", "fields": ["Vidas Field", "Fairmount Park Field"]}, {"trainer": "Ken Roby", "fields": ["Cedar Hollow Park", "Krasas Memorial Field"]}];
  const fields = [{'name': 'Olsen Field', 'lat': 40.04, 'lng': -75.4}, {'name': 'Polo Field', 'lat': 40.05, 'lng': -75.39}, {'name': 'Radnor Memorial', 'lat': 40.06, 'lng': -75.38000000000001}, {'name': 'Haverford Reserve', 'lat': 40.07, 'lng': -75.37}, {'name': 'Ashbridge Park', 'lat': 40.08, 'lng': -75.36}, {'name': 'Upper Darby FC', 'lat': 40.089999999999996, 'lng': -75.35000000000001}, {'name': 'Edgely Ultimate Fields', 'lat': 40.1, 'lng': -75.34}, {'name': 'DHMS Lower Field', 'lat': 40.11, 'lng': -75.33000000000001}, {'name': 'Fairmount Park Field', 'lat': 40.12, 'lng': -75.32000000000001}, {'name': 'Freedom Playground', 'lat': 40.13, 'lng': -75.31}, {'name': 'Wilson Farm Park', 'lat': 40.14, 'lng': -75.30000000000001}, {'name': 'Mill Road Park', 'lat': 40.15, 'lng': -75.29}, {'name': 'Krasas Memorial Field', 'lat': 40.16, 'lng': -75.28}, {'name': 'Charlestown Township Park', 'lat': 40.17, 'lng': -75.27000000000001}, {'name': 'Reservoir Park', 'lat': 40.18, 'lng': -75.26}, {'name': 'Cherry Street Park', 'lat': 40.19, 'lng': -75.25}, {'name': 'James Baxter Park', 'lat': 40.199999999999996, 'lng': -75.24000000000001}, {'name': 'Exton Park Playing Grounds', 'lat': 40.21, 'lng': -75.23}, {'name': 'Kerr Park', 'lat': 40.22, 'lng': -75.22}, {'name': 'Charles Martin Memorial Park', 'lat': 40.23, 'lng': -75.21000000000001}, {'name': 'Heuser Park', 'lat': 40.24, 'lng': -75.2}, {'name': 'Heebner Park', 'lat': 40.25, 'lng': -75.19000000000001}, {'name': 'Waterworks Park', 'lat': 40.26, 'lng': -75.18}, {'name': 'Odoriso Park', 'lat': 40.269999999999996, 'lng': -75.17}, {'name': 'BO Connor Park', 'lat': 40.28, 'lng': -75.16000000000001}, {'name': 'Cedar Hollow Park', 'lat': 40.29, 'lng': -75.15}, {'name': 'LYA Target Field', 'lat': 40.3, 'lng': -75.14}, {'name': 'PW Victory Fields', 'lat': 40.31, 'lng': -75.13000000000001}, {'name': 'SCH Soccer Fields', 'lat': 40.32, 'lng': -75.12}, {'name': 'Vidas Field', 'lat': 40.33, 'lng': -75.11}, {'name': 'Decou Soccer Field', 'lat': 40.339999999999996, 'lng': -75.10000000000001}, {'name': 'Cherry Hill Soccer Lower Chapel Grass Field', 'lat': 40.35, 'lng': -75.09}, {'name': 'Voorhees Echelon Soccer Fields', 'lat': 40.36, 'lng': -75.08000000000001}];
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASLf8mjb8iEbVo99DnaaPzXGlu5jhXrZE&callback=initMap"></script>
<script>
  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSClTYNvQo15rYGb6Au-Uxk84CxTuJ1Q5sLEhXd2ReLm0JyUbhQhOMSi1-I50hf3Rs4TArW6gmgbqfa/pub?gid=2095822811&single=true&output=csv";

  let map;

  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: 40.05, lng: -75.4 },
      zoom: 9
    });

    // Field markers
    fields.forEach(f => {
      new google.maps.Marker({
        position: { lat: f.lat, lng: f.lng },
        map: map,
        title: f.name,
        icon: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
      });
    });

    fetch(sheetURL)
      .then(response => response.text())
      .then(data => {
        const rows = data.trim().split("\n").slice(1);
        const trainers = rows.map(row => {
          const [Name, Zip, Link, Bio, Rating] = row.split(",");
          const fieldMatch = trainerFieldData.find(t => t.trainer === Name);
          return {
            Name, Zip, Link, Bio, Rating,
            Fields: fieldMatch ? fieldMatch.fields : []
          };
        });
        renderTrainers(trainers);
      });
  }

  function renderTrainers(trainers) {
    const results = document.getElementById("results");
    results.innerHTML = "";
    trainers.forEach(t => {
      const card = document.createElement("div");
      card.className = "card";
      const fieldList = t.Fields.join(", ");
      const utmField = encodeURIComponent(t.Fields[0] || "PTP");
      const bookingURL = `${t.Link}?utm_source=trainer_map&utm_field=${utmField}`;
      card.innerHTML = `
        <h3>${t.Name}</h3>
        <p>${t.Bio}</p>
        <p><strong>Fields:</strong> ${fieldList}</p>
        <p><strong>Rating:</strong> ${t.Rating} ‚≠ê</p>
        <a href="${bookingURL}" target="_blank">üìÖ Book Session</a>
        <p class="urgency">‚ö†Ô∏è Limited spots available</p>
      `;
      results.appendChild(card);
    });
  }
</script>

</body>
</html>
