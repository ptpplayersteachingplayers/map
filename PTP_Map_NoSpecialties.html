
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PTP Trainer Matcher</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
    header {
      background: #111;
      color: white;
      text-align: center;
      padding: 40px 20px;
    }
    header h1 {
      margin: 0;
      font-size: 2.5rem;
    }
    header p {
      margin-top: 10px;
      font-size: 1rem;
      color: #ccc;
    }
    #controls {
      padding: 20px;
      text-align: center;
      background: #fff;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    #zipInput, #specialtyFilter {
      padding: 10px;
      width: 220px;
      font-size: 16px;
      margin: 5px;
    }
    #searchButton {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      background-color: #FFD700;
      border: none;
      border-radius: 4px;
    }
    #map {
      width: 100%;
      height: 500px;
    }
    .trainer-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
    }
    .trainer-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin: 10px;
      padding: 15px;
      width: 280px;
      line-height: 1.5;
    }
    .trainer-card h3 {
      margin: 0;
      font-size: 1.2rem;
    }
    .trainer-card a {
      display: inline-block;
      margin-top: 8px;
      background: #FFD700;
      padding: 6px 10px;
      border-radius: 4px;
      text-decoration: none;
      color: black;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>PTP = Players Teaching Players</h1>
    <p>Find a college/pro trainer near you ‚Äî instantly.</p>
  </header>

  <div id="controls">
    <input type="text" id="zipInput" placeholder="Enter your ZIP code" />
        <button id="searchButton" onclick="filterAndDisplay()">Find Trainers</button>
  </div>

  <div id="map"></div>
  
  <div class="trainer-list" id="trainerList"></div>

  <template id="trainerTemplate">
    <div class="trainer-card">
      <img src="https://via.placeholder.com/280x160?text=Trainer+Photo" style="width:100%; border-radius: 6px; margin-bottom: 10px;" />
      <h3>{{name}}</h3>
      üìç <strong>Field:</strong> {{city}}<br>
      üéØ <strong>Specialty:</strong> {{specialty}}<br>
      üìÖ <strong>Available:</strong> {{availability}}<br>
      <em>‚Äú{{testimonial}}‚Äù</em><br>
      <a href="{{link}}" target="_blank">Book Now</a>
    </div>
  </template>
  

  <script>
    let map, trainerData = [], trainerMarkers = [];

    window.initMap = function() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 40.0, lng: -75.3 },
        zoom: 10,
        styles: [{"elementType": "geometry", "stylers": [{"color": "#1d2c4d"}]}, {"elementType": "labels.text.fill", "stylers": [{"color": "#8ec3b9"}]}, {"elementType": "labels.text.stroke", "stylers": [{"color": "#1a3646"}]}, {"featureType": "administrative.country", "elementType": "geometry.stroke", "stylers": [{"color": "#4b6878"}]}, {"featureType": "administrative.land_parcel", "stylers": [{"visibility": "off"}]}, {"featureType": "poi", "elementType": "labels.text", "stylers": [{"visibility": "off"}]}, {"featureType": "poi.park", "elementType": "geometry.fill", "stylers": [{"color": "#023e58"}]}, {"featureType": "road", "elementType": "geometry", "stylers": [{"color": "#304a7d"}]}, {"featureType": "road", "elementType": "labels.icon", "stylers": [{"visibility": "off"}]}, {"featureType": "transit", "elementType": "labels.icon", "stylers": [{"visibility": "off"}]}, {"featureType": "water", "elementType": "geometry", "stylers": [{"color": "#0e1626"}]}, {"featureType": "water", "elementType": "labels.text.fill", "stylers": [{"color": "#4e6d70"}]}]
      });
      fetchTrainerData();
    }

    function fetchTrainerData() {
      fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSClTYNvQo15rYGb6Au-Uxk84CxTuJ1Q5sLEhXd2ReLm0JyUbhQhOMSi1-I50hf3Rs4TArW6gmgbqfa/pub?gid=1794622671&single=true&output=csv")
        .then(res => res.text())
        .then(csv => {
          const lines = csv.split("\n").slice(1);
          const specialties = new Set();
          trainerData = lines.map(line => {
            const [name, link, zip, city, specialty, availability] = line.split(",");
            const lat = 40 + Math.random() * 0.2 - 0.1;
            const lng = -75.3 + Math.random() * 0.2 - 0.1;
            specialties.add(specialty);
            return { name, link, zip, city, specialty, availability, lat, lng };
          });
          
          displayAllTrainers();
        });
    }

    function populateSpecialtyFilter(specialties) {
      const filter = document.getElementById("specialtyFilter");
      specialties.forEach(spec => {
        const opt = document.createElement("option");
        opt.value = spec;
        opt.textContent = spec;
        filter.appendChild(opt);
      });
    }

    function displayEnhancedTrainers(filtered = trainerData) {
      const list = document.getElementById("trainerList");
      list.innerHTML = "";
      trainerMarkers.forEach(m => m.setMap(null));
      trainerMarkers = [];

      filtered.forEach(t => {
        
        const template = document.getElementById("trainerTemplate").innerHTML;
        const testimonial = "Coach " + t.name.split(" ")[0] + " helped my kid level up!";
        const cardElement = document.createElement("div");
        cardElement.className = "trainer-card";
        cardElement.innerHTML = template
          .replace("{{name}}", t.name)
          .replace("{{city}}", t.city)
          .replace("{{specialty}}", t.specialty)
          .replace("{{availability}}", t.availability)
          .replace("{{testimonial}}", testimonial)
          .replace("{{link}}", t.link);
        list.appendChild(cardElement);
  
        const cardElement = document.createElement("div");
        cardElement.className = "trainer-card";
        card.innerHTML = `
          <h3>${t.name}</h3>
          üìç <strong>Field:</strong> ${t.city}<br>
          üéØ <strong>Specialty:</strong> ${t.specialty}<br>
          üìÖ <strong>Available:</strong> ${t.availability}<br>
          <a href="${t.link}" target="_blank">Book Now</a>
        `;
        list.appendChild(cardElement);

        
        const cardElement = card;
        const marker = new google.maps.Marker({
          position: { lat: t.lat, lng: t.lng },
          map,
          title: t.name,
          icon: "https://maps.google.com/mapfiles/ms/icons/yellow-dot.png"
        });
        const info = new google.maps.InfoWindow({
          content: `<strong>${t.name}</strong><br>${t.city}<br><a href='${t.link}' target='_blank'>Book</a>`
        });
        marker.addListener("click", () => {
          info.open(map, marker);
          cardElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
          cardElement.style.boxShadow = "0 0 10px 2px #FFD700";
          setTimeout(() => cardElement.style.boxShadow = "", 1200);
        });
        trainerMarkers.push(marker);
  
        const marker = new google.maps.Marker({
          position: { lat: t.lat, lng: t.lng },
          map,
          title: t.name,
          icon: "https://maps.google.com/mapfiles/ms/icons/blue-dot.png"
        });
        const info = new google.maps.InfoWindow({
          content: `<strong>${t.name}</strong><br>${t.city}<br><a href='${t.link}' target='_blank'>Book</a>`
        });
        marker.addListener("click", () => info.open(map, marker));
        trainerMarkers.push(marker);
      });
    }

    window.filterAndDisplay = function() {
      const zip = document.getElementById("zipInput").value.trim();
      const specialty = document.getElementById("specialtyFilter").value;

      let filtered = trainerData;

      
      if (zip) {
        const geocoder = new google.maps.Geocoder();
        geocoder.geocode({ address: zip }, (results, status) => {
          if (status === "OK") {
            const center = results[0].geometry.location;
            map.setCenter(center);
            map.setZoom(12);
          }
        });
      }

      
  displayEnhancedTrainers(filtered);
  
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASLf8mjb8iEbVo99DnaaPzXGlu5jhXrZE&callback=initMap">
  </script>
</body>
</html>
