
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PTP Trainer Matcher</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #fff; }
    #map { height: 50vh; width: 100%; }
    .instructions { background: #fffbe6; padding: 20px; text-align: center; border-bottom: 2px solid #FFD700; }
    .search-box { text-align: center; padding: 20px; }
    .search-box input { padding: 10px; font-size: 1rem; width: 80%; max-width: 360px; border: 2px solid #FFD700; border-radius: 8px; }
    .search-box button { padding: 10px; font-weight: bold; border: none; background: #FFD700; border-radius: 8px; margin: 6px; }
    .modal { display: none; position: fixed; top: 5%; left: 50%; transform: translateX(-50%); background: white; border-radius: 12px; padding: 20px; max-width: 90%; width: 360px; box-shadow: 0 6px 20px rgba(0,0,0,0.25); z-index: 1000; }
    .modal h3 { margin-top: 0; }
    .modal button { margin-top: 16px; background: #FFD700; color: #111; font-weight: bold; padding: 10px 18px; border: none; border-radius: 8px; cursor: pointer; }
    .modal .urgency { color: #c00; font-size: 0.9rem; margin-top: 10px; }
    #overlay { position: fixed; display: none; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; }
    #confirmationMessage { display: none; text-align: center; padding: 20px; background: #e6ffe6; color: #064d06; font-weight: bold; }
  </style>
</head>
<body>

<div class="instructions"><h2>üìç Enter Your ZIP to Get Matched with a PTP Trainer</h2></div>
<div class="search-box">
  <input type="text" id="zipInput" placeholder="Enter ZIP or use location..." />
  <button onclick="useMyLocation()">üìç Use My Location</button>
  <button onclick="matchTrainer()">Match Me</button>
</div>

<div id="map"></div>
<div id="overlay"></div>
<div class="modal" id="matchModal">
  <h3 id="trainerName"></h3>
  <p><strong>Position:</strong> <span id="trainerPosition"></span></p>
  <p><strong>Bio:</strong> <span id="trainerBio"></span></p>
  <p><strong>Rating:</strong> <span id="trainerRating"></span> ‚≠ê</p>
  <p><strong>Review:</strong> ‚Äú<span id="trainerReview"></span>‚Äù</p>
  <p><strong>Trainer ZIP:</strong> <span id="trainerZIP"></span></p>
  <a id="bookButton" target="_blank"><button>üìÖ Book This Trainer</button></a>
  <p class="urgency">‚ö†Ô∏è Limited availability near you</p>
</div>

<div id="confirmationMessage">‚úÖ Thanks! Your trainer is ready ‚Äî complete your booking on the next page.</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASLf8mjb8iEbVo99DnaaPzXGlu5jhXrZE&callback=initMap" async defer></script>
<script>
const trainers = [
  {
    "name": "Cassidy Tannaddo",
    "zip": "19131",
    "link": "https://ptptrainings.as.me/cassidytannaddoptp",
    "position": "Defender",
    "bio": "Cassidy brings international experience to private training sessions, showcasing strong tactical awareness and composure on the ball. Former Hawks defender with professional experience, specializing in defensive techniques and building confident play from the back.",
    "review": "\"Coach Cassidy transformed my daughter's striking technique in just a few sessions. Her confidence on the field has improved tremendously!\"",
    "rating": 5.0
  },
  {
    "name": "Johnathan Evans",
    "zip": "19426",
    "link": "https://ptptrainings.as.me/johnathanevansptp",
    "position": "Goalkeeper",
    "bio": "Jonathan brings collegiate experience from Penn State University (NCAA Division I) to his private goalkeeper training sessions. A product of the Philadelphia Union Academy from Collegeville, PA, he is known for his quick reflexes and commanding presence in the penalty area.",
    "review": "\"We've seen remarkable progress since our son started training with Coach Jonathan. He makes technical skills fun while keeping sessions structured and productive.\"",
    "rating": 4.7
  },
  {
    "name": "James Fitzgerald",
    "zip": "19104",
    "link": "https://ptptrainings.as.me/jamesfitzegeraldptp",
    "position": "Defender",
    "bio": "A versatile player with a strong presence in both defense and midfield, James brings valuable experience from FC Delco and William Penn Charter School. His adaptability and tactical awareness make him an asset in multiple formation",
    "review": "\"Coach James has a special gift for teaching passing fundamentals. His patience and clear instruction helped our shy player become a team communicator.\"",
    "rating": 5.0
  },
  {
    "name": "Lorenzo Avalos",
    "zip": "19063",
    "link": "https://ptptrainings.as.me/lorenzoavalosptp",
    "position": "Defender",
    "bio": "Lorenzo, a former captain of the San Jose Earthquakes MLS Next team, is recognized for his leadership and ability to build play from the back. His composure on the ball and organizational skills strengthen Villanova's defensive line.",
    "review": "\"Our son's positioning has improved dramatically under Coach Lorenzo's guidance. His positive approach keeps my child eager to attend every session.\"",
    "rating": 4.8
  },
  {
    "name": "Sebastian Perez",
    "zip": "19080",
    "link": "https://ptptrainings.as.me/sebastianperezptp",
    "position": "Striker",
    "bio": "An All-American and Gatorade Player of the Year nominee, Sebastian is celebrated for his playmaking abilities and vision on the field. His technical skill and creative passing have already made him a standout performer at Drexel.",
    "review": "\"Coach Sebastian's offensive drills are excellent. My son now understands positioning and teamwork rather than just chasing the ball around the field.\"",
    "rating": 5.0
  },
  {
    "name": "Sebastian Cutler",
    "zip": "19087",
    "link": "https://ptptrainings.as.me/sebastiancutlerptp",
    "position": "Goalkeeper",
    "bio": "Sebastian transferred from Charlotte, where he recorded two shutouts. He's also been called up to the Puerto Rico National Team, bringing international experience to Villanova's goalkeeping unit.",
    "review": "\"After working with Coach Cutler, my daughter's speed and ball control have reached new levels. Worth every penny for his personalized attention.\"",
    "rating": 4.7
  },
  {
    "name": "Ken Roby",
    "zip": "19083",
    "link": "https://ptptrainings.as.me/kenrobyptp",
    "position": "Striker",
    "bio": "Ken has made significant contributions to his team, including a hat-trick performance and earning SUNYAC Athlete of the Week honors. His scoring ability and experience provide leadership to the New Paltz attack in his final collegiate season.",
    "review": "\"Coach Ken makes challenging skills approachable for young players. His shooting training helped my cautious child gain confidence with striking techniques.\"",
    "rating": 5.0
  },
  {
    "name": "Hayden Shultz",
    "zip": "8003",
    "link": "https://ptptrainings.as.me/haydenschultzptp",
    "position": "Midfielder",
    "bio": NaN,
    "review": "\"The agility and footwork improvements we've seen since training with Coach Hayden are incredible. His dribbling exercises are creative and effective.\"",
    "rating": 5.0
  },
  {
    "name": "Taylor Coulter",
    "zip": "19335",
    "link": "https://ptptrainings.as.me/taylorcoulterptp",
    "position": "Midfielder",
    "bio": NaN,
    "review": "\"Coach Taylor pushes players to their potential while keeping sessions positive. My child has developed both skills and mental toughness under her guidance.\"",
    "rating": 4.7
  },
  {
    "name": "Ella Jahromi",
    "zip": "19335",
    "link": "https://ptptrainings.as.me/ellajahromiptp",
    "position": "Midfielder",
    "bio": NaN,
    "review": "\"We noticed immediate improvement in my son's weaker foot after Coach Ella's sessions. Her balanced training approach has made him a more complete player.\"",
    "rating": 4.9
  },
  {
    "name": "Caden Grabfelder",
    "zip": "18001",
    "link": "https://ptptrainings.as.me/cadengrabfelderptp",
    "position": "Midfielder",
    "bio": NaN,
    "review": "\"Coach Caden's sessions are the perfect mix of fun and fundamentals. My daughter has mastered proper throw-in technique while actually enjoying the process!\"",
    "rating": 5.0
  }
];

const fields = [
  { name: "Radnor Memorial Park", lat: 40.042, lng: -75.37, zip: "19087" },
  { name: "Mill Road Park", lat: 40.045, lng: -75.42, zip: "19355" },
  { name: "Wilson Farm Park", lat: 40.05, lng: -75.43, zip: "19312" },
  { name: "Reservoir Park", lat: 40.052, lng: -75.35, zip: "19406" },
  { name: "Bo Connor Park", lat: 40.049, lng: -75.36, zip: "19087" },
];

let map;
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 40.05, lng: -75.4 },
    zoom: 10
  });
  fields.forEach(f => {
    new google.maps.Marker({
      position: { lat: f.lat, lng: f.lng },
      map,
      title: f.name,
      icon: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
    });
  });
}

function getDistance(zip1, zip2) {
  return Math.abs(parseInt(zip1) - parseInt(zip2));
}

function matchTrainer() {
  const zip = document.getElementById("zipInput").value.trim();
  if (!zip || zip.length < 5) return;

  const bestTrainer = trainers
    .map(t => { return { ...t, dist: getDistance(zip, t.zip) }; })
    .sort((a, b) => a.dist - b.dist)[0];

  document.getElementById("trainerName").textContent = bestTrainer.name;
  document.getElementById("trainerPosition").textContent = bestTrainer.position;
  document.getElementById("trainerBio").textContent = bestTrainer.bio;
  document.getElementById("trainerRating").textContent = bestTrainer.rating;
  document.getElementById("trainerReview").textContent = bestTrainer.review;
  document.getElementById("trainerZIP").textContent = bestTrainer.zip;

  const utm = encodeURIComponent(zip);
  document.getElementById("bookButton").href = bestTrainer.link + "?utm_source=trainer_match&utm_zip=" + utm;

  document.getElementById("matchModal").style.display = "block";
  document.getElementById("overlay").style.display = "block";
}

function useMyLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;
      fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=AIzaSyASLf8mjb8iEbVo99DnaaPzXGlu5jhXrZE`)
        .then(res => res.json())
        .then(data => {
          const zip = data.results[0].address_components.find(c => c.types.includes('postal_code')).long_name;
          document.getElementById("zipInput").value = zip;
          matchTrainer();
        });
    });
  }
}
</script>
</body>
</html>
